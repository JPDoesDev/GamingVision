<Window x:Class="GamingVision.Views.CreateProfileWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Create New Game Profile"
        SizeToContent="Height"
        Width="500"
        MinWidth="450"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResizeWithGrip"
        Background="{DynamicResource BackgroundBrush}"
        AutomationProperties.Name="Create New Game Profile Window">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Basic Info -->
        <GroupBox Grid.Row="0" Header="Game Information">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0"
                           Text="Display Name:"
                           VerticalAlignment="Center"
                           Margin="0,5"/>
                <TextBox Grid.Row="0" Grid.Column="1"
                         x:Name="DisplayNameTextBox"
                         Text="{Binding DisplayName, UpdateSourceTrigger=PropertyChanged}"
                         Margin="0,5"
                         AutomationProperties.Name="Game Display Name"
                         AutomationProperties.HelpText="The name shown in the game list"/>

                <TextBlock Grid.Row="1" Grid.Column="0"
                           Text="Game ID:"
                           VerticalAlignment="Center"
                           Margin="0,5"/>
                <TextBox Grid.Row="1" Grid.Column="1"
                         Text="{Binding GameId, UpdateSourceTrigger=PropertyChanged}"
                         Margin="0,5"
                         AutomationProperties.Name="Game ID"
                         AutomationProperties.HelpText="Unique identifier for the game folder (auto-generated from display name)"/>

                <TextBlock Grid.Row="2" Grid.Column="0"
                           Text="Window Title:"
                           VerticalAlignment="Center"
                           Margin="0,5"/>
                <Grid Grid.Row="2" Grid.Column="1" Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <ComboBox Grid.Column="0"
                              ItemsSource="{Binding AvailableWindows}"
                              SelectedItem="{Binding WindowTitle}"
                              IsEditable="True"
                              Text="{Binding WindowTitle, UpdateSourceTrigger=PropertyChanged}"
                              AutomationProperties.Name="Game Window Title"
                              AutomationProperties.HelpText="Select from open windows or type a window title"/>
                    <Button Grid.Column="1"
                            Content="Refresh"
                            Command="{Binding RefreshWindowsCommand}"
                            Margin="5,0,0,0"
                            MinWidth="60"
                            AutomationProperties.Name="Refresh Window List"/>
                </Grid>
            </Grid>
        </GroupBox>

        <!-- Capture Method -->
        <GroupBox Grid.Row="1" Header="Capture Method" Margin="0,10,0,0">
            <StackPanel>
                <RadioButton Content="Window Capture (recommended - excludes overlays)"
                             IsChecked="{Binding UseWindowCapture}"
                             Margin="0,5"
                             AutomationProperties.Name="Window Capture Mode"/>
                <RadioButton Content="Fullscreen Monitor Capture"
                             IsChecked="{Binding UseFullscreenCapture}"
                             Margin="0,5"
                             AutomationProperties.Name="Fullscreen Capture Mode"/>
                <StackPanel Orientation="Horizontal" Margin="25,5,0,0"
                            IsEnabled="{Binding UseFullscreenCapture}">
                    <TextBlock Text="Monitor:" VerticalAlignment="Center"/>
                    <ComboBox ItemsSource="{Binding Monitors}"
                              SelectedIndex="{Binding MonitorIndex}"
                              Margin="10,0,0,0"
                              MinWidth="200"
                              AutomationProperties.Name="Select Monitor"/>
                </StackPanel>
            </StackPanel>
        </GroupBox>

        <!-- Info Note -->
        <Border Grid.Row="3"
                Background="{DynamicResource SurfaceBrush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="4"
                Padding="10"
                Margin="0,10,0,0"
                VerticalAlignment="Top">
            <StackPanel>
                <TextBlock Text="What will be created:"
                           FontWeight="Bold"
                           Margin="0,0,0,5"/>
                <TextBlock TextWrapping="Wrap"
                           Foreground="{DynamicResource SecondaryTextBrush}">
                    <Run Text="- GameModels/{gameId}/game_config.json"/>
                    <LineBreak/>
                    <Run Text="- training_data/{gameId}/images/"/>
                    <LineBreak/>
                    <Run Text="- training_data/{gameId}/labels/"/>
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="Create"
                    Click="CreateButton_Click"
                    IsEnabled="{Binding CanCreate}"
                    AutomationProperties.Name="Create Profile"/>
            <Button Content="Cancel"
                    Click="CancelButton_Click"
                    AutomationProperties.Name="Cancel"/>
        </StackPanel>
    </Grid>
</Window>
